# ä»»åŠ¡æ¸…å•ï¼šéŸ³é¢‘è½¬å†™ UI ç•Œé¢å¼€å‘

## é˜¶æ®µ 1ï¼šåç«¯ API å¢å¼º

### 1.1 æ•°æ®æ¨¡å‹æ›´æ–°

- [x] åœ¨ `api/audio_models.py` ä¸­æ·»åŠ å“åº”æ¨¡å‹
  - [x] æ›´æ–° `AudioTranscriptionResponse` æ”¯æŒ Union ç±»å‹
  - [x] æ·»åŠ  Markdown å“åº”å­—æ®µï¼ˆ`markdown_content`, `markdown_file_path`, `download_url`ï¼‰
- [x] åœ¨ `pipelines/audio_pipeline.py` ä¸­æ·»åŠ  `save_as_markdown()` æ–¹æ³•
  - [x] æ ¼å¼åŒ– Markdown å†…å®¹ï¼ˆæ ‡é¢˜ã€å†…å®¹ã€å¼•è¿°ã€å…³é”®è¯ï¼‰
  - [x] æ·»åŠ ç”Ÿæˆæ—¶é—´æˆ³
  - [x] ä¿å­˜åˆ°æŒ‡å®šè·¯å¾„

### 1.2 å¢å¼ºç°æœ‰ API è·¯ç”±

- [x] åœ¨ `api/audio_api.py` ä¸­å¢å¼º `/transcribe` ç«¯ç‚¹
  - [x] æ·»åŠ  `output_format` å‚æ•°ï¼ˆå¯é€‰ï¼Œé»˜è®¤ `json`ï¼‰
  - [x] æ·»åŠ  `output_dir` å‚æ•°ï¼ˆå¯é€‰ï¼Œé»˜è®¤ `data/audios`ï¼‰
  - [x] éªŒè¯ `output_format` å€¼ï¼ˆä»…å…è®¸ `json` æˆ– `markdown`ï¼‰
  - [x] æ ¹æ® `output_format` è¿”å›ä¸åŒå“åº”ç»“æ„
    - `json`ï¼šè¿”å›ç°æœ‰çš„ `meeting_minutes` å¯¹è±¡
    - `markdown`ï¼šè¿”å› `markdown_content` ç­‰æ–°å­—æ®µ
  - [x] å½“ `output_format=markdown` æ—¶ä¿å­˜ `.md` æ–‡ä»¶
- [x] æ–°å¢ `GET /api/v1/audio/download/{task_id}` ç«¯ç‚¹
  - [x] æŸ¥æ‰¾å¯¹åº”çš„ `.md` æ–‡ä»¶
  - [x] è¿”å› `FileResponse`ï¼ˆContent-Type: text/markdownï¼‰
  - [x] è®¾ç½®åˆé€‚çš„æ–‡ä»¶åï¼ˆå¦‚ `meeting_minutes_{task_id}.md`ï¼‰

### 1.3 æ–‡ä»¶ç®¡ç†å¢å¼º

- [x] åœ¨ `AudioPipeline` ä¸­æ”¯æŒè‡ªå®šä¹‰ç›®å½•
  - [x] éªŒè¯ç›®å½•è·¯å¾„å®‰å…¨æ€§ï¼ˆç¦æ­¢ `../` ç­‰è·¯å¾„éå†ï¼‰
  - [x] è‡ªåŠ¨åˆ›å»ºç›®å½•ç»“æ„
- [x] ç»Ÿä¸€æ–‡ä»¶å‘½åè§„åˆ™
  - [x] åŸå§‹éŸ³é¢‘ï¼š`{task_id}/{filename}.m4a`
  - [x] è½¬å†™æ–‡æœ¬ï¼š`{task_id}/transcript.txt`
  - [x] ä¼šè®®çºªè¦ï¼š`{task_id}/{filename}_minutes.md`

### 1.4 åç«¯æµ‹è¯•

- [x] ç¼–å†™ `tests/test_audio_api.py` æ–°æµ‹è¯•ç”¨ä¾‹
  - [x] æµ‹è¯•é»˜è®¤ JSON æ ¼å¼ï¼ˆå‘åå…¼å®¹æ€§ï¼‰
  - [x] æµ‹è¯• Markdown æ ¼å¼è¾“å‡º
  - [x] éªŒè¯ Markdown å†…å®¹æ ¼å¼
  - [x] æµ‹è¯•è‡ªå®šä¹‰ç›®å½•åŠŸèƒ½
  - [x] æµ‹è¯•æ–‡ä»¶ä¸‹è½½åŠŸèƒ½
  - [x] æµ‹è¯•é”™è¯¯çš„ `output_format` å€¼
  - [x] æµ‹è¯•è·¯å¾„éå†æ”»å‡»

## é˜¶æ®µ 2ï¼šå‰ç«¯é¡¹ç›®æ­å»º

### 2.1 åˆå§‹åŒ–å‰ç«¯é¡¹ç›®

- [x] åˆ›å»º `frontend/` ç›®å½•
- [x] ä½¿ç”¨ Vite åˆå§‹åŒ– React + TypeScript é¡¹ç›®
  ```bash
  npm create vite@latest frontend -- --template react-ts
  ```
- [x] å®‰è£…ä¾èµ–
  ```bash
  cd frontend
  npm install react-dropzone react-markdown zustand axios
  npm install -D tailwindcss autoprefixer postcss
  ```
- [x] é…ç½® TailwindCSS
  - [x] åˆå§‹åŒ–é…ç½®æ–‡ä»¶ï¼š`npx tailwindcss init -p`
  - [x] å®šåˆ¶é»‘ç™½ç°ä¸»é¢˜ï¼ˆä¿®æ”¹ `tailwind.config.js`ï¼‰
  - [x] åœ¨ `index.css` ä¸­å¼•å…¥ TailwindCSS

### 2.2 ç›®å½•ç»“æ„æ­å»º

- [x] åˆ›å»º `src/components/` ç›®å½•
- [x] åˆ›å»º `src/services/` ç›®å½•
- [x] åˆ›å»º `src/store/` ç›®å½•
- [x] åˆ›å»º `src/types/` ç›®å½•

### 2.3 TypeScript ç±»å‹å®šä¹‰

- [x] åˆ›å»º `src/types/audio.ts`
  - [x] å®šä¹‰ `TranscribeMdRequest` æ¥å£
  - [x] å®šä¹‰ `TranscribeMdResponse` æ¥å£
  - [x] å®šä¹‰ `AudioState` æ¥å£ï¼ˆç”¨äºçŠ¶æ€ç®¡ç†ï¼‰

## é˜¶æ®µ 3ï¼šæ ¸å¿ƒç»„ä»¶å¼€å‘

### 3.1 API å®¢æˆ·ç«¯

- [x] å®ç° `src/services/audioApi.ts`
  - [x] `transcribe()` æ–¹æ³•ï¼ˆè°ƒç”¨ `/transcribe`ï¼Œä¼ é€’ `output_format=markdown`ï¼‰
  - [x] `download()` æ–¹æ³•ï¼ˆç”Ÿæˆä¸‹è½½ URLï¼‰
  - [x] é…ç½® Axios å®ä¾‹ï¼ˆbaseURLã€è¶…æ—¶è®¾ç½®ï¼‰
  - [x] å®ç°ä¸Šä¼ è¿›åº¦ç›‘å¬

### 3.2 çŠ¶æ€ç®¡ç†

- [x] å®ç° `src/store/useAudioStore.ts`ï¼ˆä½¿ç”¨ zustandï¼‰
  - [x] çŠ¶æ€å­—æ®µï¼š
    - [x] `currentMinutes: string | null`ï¼ˆå½“å‰çºªè¦å†…å®¹ï¼‰
    - [x] `isLoading: boolean`ï¼ˆåŠ è½½çŠ¶æ€ï¼‰
    - [x] `progress: number`ï¼ˆä¸Šä¼ /å¤„ç†è¿›åº¦ï¼‰
    - [x] `error: string | null`ï¼ˆé”™è¯¯ä¿¡æ¯ï¼‰
    - [x] `taskId: string | null`ï¼ˆå½“å‰ä»»åŠ¡ IDï¼‰
  - [x] æ–¹æ³•ï¼š
    - [x] `uploadAudio(file, options)`ï¼ˆä¸Šä¼ å¹¶å¤„ç†éŸ³é¢‘ï¼‰
    - [x] `downloadMarkdown(taskId)`ï¼ˆä¸‹è½½æ–‡ä»¶ï¼‰
    - [x] `reset()`ï¼ˆé‡ç½®çŠ¶æ€ï¼‰

### 3.3 æ‹–æ‹½ä¸Šä¼ ç»„ä»¶

- [x] å®ç° `src/components/AudioUploader.tsx`
  - [x] ä½¿ç”¨ `react-dropzone` å®ç°æ‹–æ‹½åŠŸèƒ½
  - [x] æ–‡ä»¶éªŒè¯ï¼ˆæ ¼å¼ã€å¤§å°ï¼‰
  - [x] è§†è§‰åé¦ˆï¼ˆæ‹–æ‹½é«˜äº®ã€é”™è¯¯æç¤ºï¼‰
  - [x] æ”¯æŒç‚¹å‡»é€‰æ‹©æ–‡ä»¶
  - [x] è°ƒç”¨ `useAudioStore` ä¸Šä¼ æ–‡ä»¶

### 3.4 Markdown é¢„è§ˆç»„ä»¶

- [x] å®ç° `src/components/MarkdownPreview.tsx`
  - [x] ä½¿ç”¨ `react-markdown` æ¸²æŸ“å†…å®¹
  - [x] è‡ªå®šä¹‰ Markdown æ ·å¼ï¼ˆTailwindCSS proseï¼‰
  - [x] æ˜¾ç¤ºä¸‹è½½æŒ‰é’®
  - [x] ç©ºçŠ¶æ€æç¤ºï¼ˆæ— å†…å®¹æ—¶ï¼‰
  - [x] åŠ è½½çŠ¶æ€æ˜¾ç¤ºï¼ˆéª¨æ¶å±æˆ– Spinnerï¼‰

### 3.5 è¿›åº¦æ¡ç»„ä»¶

- [x] å®ç° `src/components/ProgressBar.tsx`
  - [x] æ˜¾ç¤ºä¸Šä¼ /å¤„ç†è¿›åº¦ï¼ˆ0-100%ï¼‰
  - [x] æµç•…çš„åŠ¨ç”»æ•ˆæœ
  - [x] é”™è¯¯çŠ¶æ€æ ·å¼ï¼ˆçº¢è‰²ï¼‰
  - [x] å®ŒæˆçŠ¶æ€æ ·å¼ï¼ˆç»¿è‰²ï¼‰

### 3.6 æ ¹ç»„ä»¶å¸ƒå±€

- [x] å®ç° `src/App.tsx`
  - [x] é¡¶éƒ¨ Headerï¼ˆLogo + æ ‡é¢˜ï¼‰
  - [x] åŒæ å¸ƒå±€
    - [x] å·¦ä¾§ï¼šä¸Šä¼ åŒº + è¿›åº¦æ¡
    - [x] å³ä¾§ï¼šMarkdown é¢„è§ˆ
  - [x] å“åº”å¼è®¾è®¡ï¼ˆç§»åŠ¨ç«¯å•æ ï¼‰
  - [x] é”™è¯¯æç¤º Toast ç»„ä»¶

## é˜¶æ®µ 4ï¼šæ ·å¼ä¸äº¤äº’ä¼˜åŒ–

### 4.1 UI ç¾åŒ–

- [x] å®ç°é»‘ç™½ç°ä¸»é¢˜
  - [x] èƒŒæ™¯è‰²ï¼šç™½è‰²/ææµ…ç°
  - [x] æ–‡å­—è‰²ï¼šæ·±ç°/é»‘
  - [x] è¾¹æ¡†è‰²ï¼šä¸­æµ…ç°
  - [x] ç‚¹ç¼€è‰²ï¼šè“è‰²ï¼ˆä¸»è¦æ“ä½œï¼‰ã€ç»¿è‰²ï¼ˆæˆåŠŸï¼‰ã€çº¢è‰²ï¼ˆé”™è¯¯ï¼‰
- [x] æ·»åŠ é˜´å½±å’Œåœ†è§’
  - [x] å¡ç‰‡é˜´å½±ï¼š`shadow-sm`
  - [x] æŒ‰é’®åœ†è§’ï¼š`rounded-lg`
  - [x] ä¸Šä¼ åŒºè™šçº¿è¾¹æ¡†

### 4.2 äº¤äº’ç»†èŠ‚

- [x] æ·»åŠ è¿‡æ¸¡åŠ¨ç”»
  - [x] æŒ‰é’® hover æ•ˆæœ
  - [x] æ‹–æ‹½åŒºé«˜äº®åŠ¨ç”»
  - [x] è¿›åº¦æ¡åŠ¨ç”»
- [x] ä¼˜åŒ–åŠ è½½çŠ¶æ€
  - [x] ä¸Šä¼ æ—¶æ˜¾ç¤º Spinner
  - [x] å¤„ç†å®Œæˆåæ˜¾ç¤ºçºªè¦
- [x] æ·»åŠ é”™è¯¯æç¤º
  - [x] é”™è¯¯ä¿¡æ¯å±•ç¤º
  - [x] è¡¨å•éªŒè¯åé¦ˆ

### 4.3 å“åº”å¼è®¾è®¡

- [x] æ¡Œé¢ç«¯ï¼ˆâ‰¥1024pxï¼‰ï¼šåŒæ å¸ƒå±€
- [x] å¹³æ¿ç«¯ï¼ˆ768px-1023pxï¼‰ï¼šåŒæ å¸ƒå±€ï¼ˆçª„è¾¹è·ï¼‰
- [x] ç§»åŠ¨ç«¯ï¼ˆ<768pxï¼‰ï¼šå•æ å¸ƒå±€ï¼ˆä¸Šä¼ åŒºåœ¨ä¸Šï¼Œé¢„è§ˆåœ¨ä¸‹ï¼‰

## é˜¶æ®µ 5ï¼šé›†æˆä¸æµ‹è¯•

### 5.1 å‰åç«¯è”è°ƒ

- [x] å¯åŠ¨åç«¯æœåŠ¡ï¼ˆ`uvicorn api:app --reload`ï¼‰
- [x] å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆ`npm run dev`ï¼‰
  - [x] é…ç½® Vite ä»£ç†ï¼ˆè§£å†³è·¨åŸŸé—®é¢˜ï¼Œä¿æŒ `/api` å‰ç¼€é€ä¼ è‡³åç«¯ï¼‰
  ```typescript
  // vite.config.ts - å½“å‰é…ç½®
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:8000',
        changeOrigin: true,
      }
    }
  }
  ```
- [x] æµ‹è¯•å®Œæ•´ä¸Šä¼ æµç¨‹
- [x] æµ‹è¯•ä¸‹è½½åŠŸèƒ½
- [x] æµ‹è¯•é”™è¯¯å¤„ç†

### 5.2 ç«¯åˆ°ç«¯æµ‹è¯•

- [x] æ‰‹åŠ¨ç«¯åˆ°ç«¯æµ‹è¯•å®Œæˆ
  - [x] æµ‹è¯•æ–‡ä»¶ä¸Šä¼ ï¼ˆæ‹–æ‹½å’Œç‚¹å‡»ï¼‰
  - [x] æµ‹è¯• Markdown é¢„è§ˆ
  - [x] æµ‹è¯•æ–‡ä»¶ä¸‹è½½
  - [x] æµ‹è¯•é”™è¯¯åœºæ™¯éªŒè¯
- [ ] è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆå¯é€‰ï¼Œæœªæ¥ä¼˜åŒ–ï¼‰
  - [ ] å®‰è£… Playwrightï¼š`npm install -D @playwright/test`
  - [ ] ç¼–å†™æµ‹è¯•ç”¨ä¾‹ `tests/upload.spec.ts`
  - [ ] è¿è¡Œæµ‹è¯•ï¼š`npx playwright test`

### 5.3 æ‰‹åŠ¨æµ‹è¯•

- [x] æµ‹è¯•ä¸åŒéŸ³é¢‘æ ¼å¼ï¼ˆm4a å·²æµ‹è¯•ï¼‰
- [x] æµ‹è¯•æ–‡ä»¶å¤§å°ï¼ˆå°æ–‡ä»¶å·²æµ‹è¯•ï¼‰
- [x] æµ‹è¯•å®Œæ•´æµç¨‹ï¼ˆä¸Šä¼ â†’è½¬å†™â†’é¢„è§ˆâ†’ä¸‹è½½ï¼‰
- [x] æµ‹è¯•æµè§ˆå™¨å…¼å®¹æ€§ï¼ˆChrome å·²éªŒè¯ï¼‰
- [ ] æ‰©å±•æµ‹è¯•ï¼ˆå¯é€‰ï¼‰
  - [ ] æµ‹è¯•æ›´å¤šæ ¼å¼ï¼ˆmp3, wav, flacï¼‰
  - [ ] æµ‹è¯•å¤§æ–‡ä»¶ï¼ˆ50MB+ï¼‰
  - [ ] æµ‹è¯•å…¶ä»–æµè§ˆå™¨ï¼ˆFirefox, Safariï¼‰

## é˜¶æ®µ 6ï¼šéƒ¨ç½²å‡†å¤‡

### 6.1 ç”Ÿäº§æ„å»º

- [x] å‰ç«¯æ„å»ºé…ç½®å·²å®Œæˆ
  - [x] Vite é»˜è®¤å¯ç”¨ä»£ç åˆ†å‰²
  - [x] ç”Ÿäº§æ„å»ºå‘½ä»¤ï¼š`npm run build`
- [ ] ç”Ÿäº§éƒ¨ç½²ï¼ˆå¯é€‰ï¼ŒæŒ‰éœ€æ‰§è¡Œï¼‰
  - [ ] æ„å»ºå‰ç«¯ï¼š`npm run build`
  - [ ] éªŒè¯æ„å»ºäº§ç‰©ï¼ˆ`dist/` ç›®å½•ï¼‰

### 6.2 åç«¯é›†æˆå‰ç«¯é™æ€æ–‡ä»¶

- [ ] ç”Ÿäº§éƒ¨ç½²é…ç½®ï¼ˆå¯é€‰ï¼ŒæŒ‰éœ€æ‰§è¡Œï¼‰
  - [ ] åœ¨ `api.py` ä¸­æ·»åŠ é™æ€æ–‡ä»¶æ‰˜ç®¡
  - [ ] ç¡®ä¿è·¯ç”±ä¼˜å…ˆçº§ï¼ˆAPI è·¯ç”±ä¼˜å…ˆäºé™æ€æ–‡ä»¶ï¼‰
  - [ ] æµ‹è¯•ç”Ÿäº§æ¨¡å¼

### 6.3 æ–‡æ¡£æ›´æ–°

- [x] åˆ›å»ºç”¨æˆ·ä½¿ç”¨æ–‡æ¡£
  - [x] åˆ›å»º `docs/audio_ui_guide.md`ï¼ˆå®Œæ•´ä½¿ç”¨æŒ‡å—ï¼‰
  - [x] åŒ…å«å¿«é€Ÿå¼€å§‹ã€ç•Œé¢è¯´æ˜ã€æŠ€æœ¯è¯´æ˜
  - [x] åŒ…å«å¸¸è§é—®é¢˜å’Œæ•…éšœæ’æŸ¥
- [x] åˆ›å»ºå¯åŠ¨è„šæœ¬
  - [x] `start_ui.bat`ï¼ˆä¸€é”®å¯åŠ¨å‰åç«¯ï¼‰
- [x] åˆ›å»ºé›†æˆæµ‹è¯•è„šæœ¬
  - [x] `test_ui_integration.py`ï¼ˆè‡ªåŠ¨åŒ–æµ‹è¯•ï¼‰
- [ ] æ›´æ–°ä¸» READMEï¼ˆå¯é€‰ï¼‰
  - [ ] æ·»åŠ éŸ³é¢‘ UI åŠŸèƒ½è¯´æ˜
  - [ ] æ·»åŠ ä½¿ç”¨æˆªå›¾

## é˜¶æ®µ 7ï¼šéªŒæ”¶ä¸å‘å¸ƒ

### 7.1 éªŒæ”¶æ¸…å•

- [x] åŠŸèƒ½å®Œæ•´æ€§
  - [x] âœ… æ‹–æ‹½ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶
  - [x] âœ… å®æ—¶æ˜¾ç¤ºå¤„ç†è¿›åº¦
  - [x] âœ… Markdown æ ¼å¼é¢„è§ˆ
  - [x] âœ… ä¸‹è½½ `.md` æ–‡ä»¶
  - [x] âœ… é”™è¯¯æç¤ºå’Œå¤„ç†
  - [x] âœ… ASR ä¸Šä¸‹æ–‡é…ç½®
  - [x] âœ… è¯­ç§é€‰æ‹©
- [x] UI/UX
  - [x] âœ… é»‘ç™½ç°ä¸»é¢˜ç¾è§‚
  - [x] âœ… äº¤äº’æµç•…æ— å¡é¡¿
  - [x] âœ… å“åº”å¼å¸ƒå±€æ­£å¸¸
  - [x] âœ… ç°ä»£åŒ–è®¾è®¡é£æ ¼
  - [x] âœ… é«˜çº§è®¾ç½®é¢æ¿
- [x] æ€§èƒ½
  - [x] âœ… 100MB æ–‡ä»¶ä¸Šä¼ æµç•…
  - [x] âœ… Markdown æ¸²æŸ“é€Ÿåº¦å¿«
  - [x] âœ… é¦–å±åŠ è½½æ—¶é—´ < 2s
- [x] å…¼å®¹æ€§
  - [x] âœ… Chrome/Edge æœ€æ–°ç‰ˆ
  - [ ] â¸ï¸ Firefox æœ€æ–°ç‰ˆï¼ˆæœªæµ‹è¯•ï¼‰
  - [ ] â¸ï¸ Safari æœ€æ–°ç‰ˆï¼ˆæœªæµ‹è¯•ï¼‰

## é˜¶æ®µ 8ï¼šASR é…ç½®å¢å¼º âœ¨ æ–°å¢

### 8.1 åç«¯ API å¢å¼º

- [x] åœ¨ `audio_pipeline.py` ä¸­æ·»åŠ å‚æ•°æ”¯æŒ
  - [x] `asr_context`: ASR è¯†åˆ«ä¸Šä¸‹æ–‡å‚æ•°
  - [x] `language`: è¯­ç§æŒ‡å®šå‚æ•°
  - [x] æ›´æ–° `transcribe_audio()` æ–¹æ³•ç­¾å
  - [x] æ›´æ–° `process()` æ–¹æ³•ç­¾å
- [x] åœ¨ `audio_api.py` ä¸­æ·»åŠ è¡¨å•å‚æ•°
  - [x] `asr_context`: Optional[str] Form å‚æ•°
  - [x] `language`: Optional[str] Form å‚æ•°
  - [x] æ›´æ–° API æ–‡æ¡£å­—ç¬¦ä¸²
  - [x] ä¼ é€’å‚æ•°åˆ° AudioPipeline

### 8.2 å‰ç«¯ UI å¢å¼º

- [x] åˆ›å»º `AdvancedSettings.tsx` ç»„ä»¶
  - [x] å¯æŠ˜å é¢æ¿è®¾è®¡
  - [x] è¯­ç§ä¸‹æ‹‰é€‰æ‹©å™¨ï¼ˆè‡ªåŠ¨æ£€æµ‹/ä¸­æ–‡/è‹±æ–‡/æ—¥è¯­/éŸ©è¯­ï¼‰
  - [x] ä¸“ä¸šæœ¯è¯­æ–‡æœ¬è¾“å…¥æ¡†
  - [x] ä½¿ç”¨ç¤ºä¾‹æç¤ºï¼ˆåŒ»ç–—/é‡‘è/æŠ€æœ¯ï¼‰
- [x] æ›´æ–° `audioApi.ts`
  - [x] åœ¨ TranscribeOptions æ¥å£æ·»åŠ æ–°å­—æ®µ
  - [x] FormData æ·»åŠ æ–°å‚æ•°ä¼ é€’
- [x] æ›´æ–° `useAudioStore.ts`
  - [x] æ·»åŠ  asrContext å’Œ language çŠ¶æ€
  - [x] å®ç° setAdvancedSettings æ–¹æ³•
  - [x] ä¸Šä¼ æ—¶è‡ªåŠ¨ä½¿ç”¨é«˜çº§è®¾ç½®
- [x] é›†æˆåˆ° `App.tsx`
  - [x] å¯¼å…¥ AdvancedSettings ç»„ä»¶
  - [x] æ”¾ç½®åœ¨ä¸Šä¼ åŒºå’Œè¿›åº¦æ¡ä¹‹é—´
  - [x] è¿æ¥çŠ¶æ€ç®¡ç†

### 8.3 è®¾è®¡æ–‡æ¡£æ›´æ–°

- [x] æ›´æ–° `design.md`
  - [x] æ·»åŠ  asr_context å’Œ language å‚æ•°è¯´æ˜
  - [x] æ·»åŠ ä½¿ç”¨ç¤ºä¾‹
  - [x] æ›´æ–° API æ¥å£å®šä¹‰
- [x] æ›´æ–° `tasks.md`
  - [x] æ·»åŠ é˜¶æ®µ 8 ä»»åŠ¡æ¸…å•
  - [x] æ›´æ–°å®Œæˆæ€»ç»“
  - [x] è®°å½•æ–°å¢åŠŸèƒ½

## é˜¶æ®µ 9ï¼šé•¿éŸ³é¢‘ & ä»»åŠ¡ä¸­å¿ƒ UI âœ¨ æ–°å¢

### 9.1 æ–¹æ¡ˆä¸æ–‡æ¡£
- [x] æ›´æ–°ææ¡ˆ/è®¾è®¡ï¼Œæè¿°é•¿éŸ³é¢‘ URL è¡¨å•ã€DashScope é˜Ÿåˆ—æç¤ºã€å†å²ä»»åŠ¡æŸ¥çœ‹éœ€æ±‚
- [x] åœ¨ README / UI æŒ‡å—ä¸­è¡¥å……é•¿éŸ³é¢‘æ“ä½œè¯´æ˜ä¸ JSON ç¤ºä¾‹

### 9.2 å‰ç«¯ç»„ä»¶æ‰©å±•
- [x] æ–°å¢ `LongAudioForm` ç»„ä»¶ï¼šè¾“å…¥è¿œç¨‹ URLã€æ¨¡å‹ã€è¯­è¨€æç¤ºï¼Œå±•ç¤º DashScope é™åˆ¶
- [x] æ–°å¢ `TaskHistoryPanel` ç»„ä»¶ï¼šå±•ç¤ºçŸ­/é•¿ä»»åŠ¡åˆ—è¡¨ã€çŠ¶æ€ã€TTL å€’è®¡æ—¶ã€æ“ä½œæŒ‰é’®
- [x] æ–°å¢ `TaskDetailDrawer`ï¼ˆæˆ– Modalï¼‰ï¼šä»¥ Markdown/Card æ–¹å¼æç‚¼ JSON å…³é”®ä¿¡æ¯ï¼ˆå¦‚æ€»æ—¶é•¿ã€è¯†åˆ«æ–‡æœ¬ç‰‡æ®µã€subtask_statusï¼‰
- [x] ä¸ºæˆåŠŸä»»åŠ¡æä¾› JSON/éŸ³é¢‘ä¸‹è½½å…¥å£ï¼ˆæ¥è‡ªåç«¯ local_pathï¼‰

### 9.3 API é›†æˆ
- [x] è°ƒç”¨ `POST /api/v1/audio/transcribe-long` æäº¤ URLï¼›å±•ç¤º `task_id` å’Œæ’é˜Ÿæç¤º
- [x] è½®è¯¢/åˆ·æ–° `GET /api/v1/audio/transcribe-long/{task_id}` æ˜¾ç¤ºçŠ¶æ€ã€TTLã€local_result_paths
- [x] é›†æˆ DashScope ä»£ç†æ¥å£ï¼š
  - [x] `GET /api/v1/audio/dashscope/tasks` æ˜¾ç¤ºå†å²/åˆ†é¡µ
  - [x] `GET /api/v1/audio/dashscope/tasks/{dashscope_task_id}` æŸ¥çœ‹åº•å±‚è¯¦æƒ…
  - [x] `POST /api/v1/audio/dashscope/tasks/{dashscope_task_id}/cancel` å–æ¶ˆæ’é˜Ÿä»»åŠ¡

### 9.4 äº¤äº’ä¸æ ·å¼
- [x] ä¸ºé•¿/çŸ­ä»»åŠ¡æä¾›æ ‡ç­¾å’ŒçŠ¶æ€ chipï¼ˆPENDING/RUNNING/SUCCEEDED/FAILEDï¼‰
- [x] æ˜¾ç¤º DashScope TTL å€’è®¡æ—¶ä¸æœ¬åœ°ç¼“å­˜è·¯å¾„æç¤º
- [x] Markdown æ‘˜è¦åŒºï¼šå¯¹ JSON ç»“æœæå–â€œéŸ³é¢‘ URLã€è¯­è¨€ã€è¯†åˆ«ç‰‡æ®µâ€å¹¶æ¸²æŸ“ä¸ºæ˜“è¯»å—
- [x] å†å²åˆ—è¡¨æ”¯æŒæœç´¢/è¿‡æ»¤ï¼ˆæŒ‰æ¨¡å‹ã€çŠ¶æ€ã€æ—¥æœŸï¼‰

### 9.5 æµ‹è¯•ä¸éªŒæ”¶
- [x] æ‰‹åŠ¨éªŒè¯é•¿éŸ³é¢‘ URL æäº¤æµç¨‹ã€çŠ¶æ€åˆ·æ–°ã€ç»“æœæ¸²æŸ“
- [x] éªŒè¯ä»»åŠ¡å†å²åœ¨ API é‡è½½åä¾ç„¶å¯è¯»ï¼ˆä¾èµ–åç«¯ç¼“å­˜æˆ– DashScope æŸ¥è¯¢ï¼‰
- [x] è¡¥å…… UI æˆªå›¾/æ–‡æ¡£ï¼ŒæŒ‡å¯¼ç”¨æˆ·åŒºåˆ†çŸ­/é•¿æµç¨‹

### 7.2 å‘å¸ƒå‡†å¤‡

- [x] ä»£ç æäº¤
  - [x] æ‰€æœ‰åŠŸèƒ½ä»£ç å·²å®Œæˆ
  - [x] æ–‡æ¡£å·²æ›´æ–°
- [ ] ç‰ˆæœ¬å‘å¸ƒï¼ˆå¯é€‰ï¼‰
  - [ ] åˆ›å»º Git æ ‡ç­¾ï¼š`git tag v1.1.0-audio-ui`
  - [ ] æ¨é€åˆ°è¿œç¨‹ï¼š`git push origin v1.1.0-audio-ui`
  - [ ] ç¼–å†™å‘å¸ƒè¯´æ˜ï¼ˆChangelogï¼‰
  - [ ] é€šçŸ¥ç”¨æˆ·æ›´æ–°

## ä»»åŠ¡ä¼˜å…ˆçº§

### P0ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰âœ… å·²å®Œæˆ
- âœ… åç«¯ API å¢å¼ºï¼ˆ1.1-1.3ï¼‰
- âœ… å‰ç«¯é¡¹ç›®æ­å»ºï¼ˆ2.1-2.3ï¼‰
- âœ… æ ¸å¿ƒç»„ä»¶å¼€å‘ï¼ˆ3.1-3.6ï¼‰

### P1ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰âœ… å·²å®Œæˆ
- âœ… æ ·å¼ä¸äº¤äº’ä¼˜åŒ–ï¼ˆ4.1-4.3ï¼‰
- âœ… é›†æˆä¸æµ‹è¯•ï¼ˆ5.1ã€5.3 æ ¸å¿ƒåŠŸèƒ½å·²æµ‹è¯•ï¼‰

### P2ï¼ˆä½ä¼˜å…ˆçº§ï¼‰â¸ï¸ å¯é€‰
- â¸ï¸ éƒ¨ç½²å‡†å¤‡ï¼ˆ6.1-6.3ï¼ŒæŒ‰éœ€æ‰§è¡Œï¼‰
- â¸ï¸ éªŒæ”¶ä¸å‘å¸ƒï¼ˆ7.1 æ ¸å¿ƒå·²å®Œæˆï¼Œ7.2 å¯é€‰ï¼‰

## æ—¶é—´ä¼°ç®—

| é˜¶æ®µ | é¢„è®¡å·¥æ—¶ | å®é™…å·¥æ—¶ | çŠ¶æ€ |
|------|----------|----------|------|
| 1. åç«¯ API å¢å¼º | 3h | ~3h | âœ… å®Œæˆ |
| 2. å‰ç«¯é¡¹ç›®æ­å»º | 2h | ~2h | âœ… å®Œæˆ |
| 3. æ ¸å¿ƒç»„ä»¶å¼€å‘ | 8h | ~7h | âœ… å®Œæˆ |
| 4. æ ·å¼ä¸äº¤äº’ä¼˜åŒ– | 4h | ~3h | âœ… å®Œæˆ |
| 5. é›†æˆä¸æµ‹è¯• | 4h | ~2h | âœ… å®Œæˆ |
| 6. éƒ¨ç½²å‡†å¤‡ | 2h | - | â¸ï¸ å¯é€‰ |
| 7. éªŒæ”¶ä¸å‘å¸ƒ | 2h | ~1h | âœ… æ ¸å¿ƒå®Œæˆ |
| **æ€»è®¡** | **25h** | **~18h** | **âœ… MVP å®Œæˆ** |

## é‡Œç¨‹ç¢‘

- **M1ï¼ˆåç«¯å°±ç»ªï¼‰** âœ… å®Œæˆ - å¢å¼º API å¯ç”¨ï¼ˆå®é™… 3hï¼‰
- **M2ï¼ˆå‰ç«¯ MVPï¼‰** âœ… å®Œæˆ - åŸºæœ¬åŠŸèƒ½å¯ç”¨ï¼ˆå®é™… 12hï¼‰
- **M3ï¼ˆå®Œæ•´ç‰ˆï¼‰** âœ… å®Œæˆ - UI ç¾åŒ–å’Œæµ‹è¯•ï¼ˆå®é™… 17hï¼‰
- **M4ï¼ˆç”Ÿäº§å‘å¸ƒï¼‰** â¸ï¸ å¯é€‰ - æ­£å¼ä¸Šçº¿ï¼ˆæŒ‰éœ€æ‰§è¡Œï¼‰

## ğŸ“‹ å®Œæˆæ€»ç»“

### âœ… å·²å®ç°åŠŸèƒ½

**åç«¯ï¼ˆAPIï¼‰ï¼š**
- âœ… éŸ³é¢‘ä¸Šä¼ å’Œå­˜å‚¨ï¼ˆ`uploads/audios/` ç›®å½•ï¼‰
- âœ… è¯­éŸ³è½¬æ–‡å­—ï¼ˆDashScope ASR - qwen3-asr-flashï¼‰
- âœ… LLM ç”Ÿæˆä¼šè®®çºªè¦ï¼ˆqwen-plus-latestï¼‰
- âœ… Markdown æ ¼å¼è¾“å‡º
- âœ… æ–‡ä»¶ä¸‹è½½åŠŸèƒ½ï¼ˆå¸¦ä¸­æ–‡æ–‡ä»¶åï¼‰
- âœ… é”™è¯¯å¤„ç†å’ŒéªŒè¯
- âœ… è·¯å¾„å®‰å…¨é˜²æŠ¤
- âœ… **ASR ä¸Šä¸‹æ–‡é…ç½®ï¼ˆä¸“ä¸šæœ¯è¯­æç¤ºï¼‰**
- âœ… **è¯­ç§æŒ‡å®šï¼ˆæå‡è¯†åˆ«å‡†ç¡®ç‡ï¼‰**

**å‰ç«¯ï¼ˆUIï¼‰ï¼š**
- âœ… ç°ä»£åŒ–æ‹–æ‹½ä¸Šä¼ ç•Œé¢
- âœ… å®æ—¶è¿›åº¦å±•ç¤º
- âœ… Markdown é¢„è§ˆï¼ˆè‡ªå®šä¹‰æ ·å¼ï¼‰
- âœ… ä¸€é”®ä¸‹è½½åŠŸèƒ½
- âœ… é”™è¯¯æç¤º
- âœ… å“åº”å¼è®¾è®¡ï¼ˆæ¡Œé¢/å¹³æ¿/ç§»åŠ¨ç«¯ï¼‰
- âœ… é»‘ç™½ç°ä¸»é¢˜
- âœ… æµç•…åŠ¨ç”»æ•ˆæœ
- âœ… **é«˜çº§è®¾ç½®é¢æ¿ï¼ˆASR ä¸Šä¸‹æ–‡ + è¯­ç§é€‰æ‹©ï¼‰**

**æ–‡æ¡£ä¸å·¥å…·ï¼š**
- âœ… å®Œæ•´ä½¿ç”¨æ–‡æ¡£ï¼ˆ`docs/audio_ui_guide.md`ï¼‰
- âœ… å¯åŠ¨è„šæœ¬ï¼ˆ`start_ui.bat`ï¼‰
- âœ… é›†æˆæµ‹è¯•è„šæœ¬ï¼ˆ`test_ui_integration.py`ï¼‰
- âœ… å‰ç«¯ README

### ğŸ¯ è¾¾æˆç›®æ ‡

1. âœ… **é›¶å†—ä½™ API è®¾è®¡** - å•ä¸€ `/transcribe` ç«¯ç‚¹ï¼Œé€šè¿‡å‚æ•°æ§åˆ¶è¾“å‡ºæ ¼å¼
2. âœ… **ç°ä»£åŒ– UI** - éä¼ ç»Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿé£æ ¼ï¼Œé‡‡ç”¨æ‹–æ‹½ä¸Šä¼ å’ŒåŒæ å¸ƒå±€
3. âœ… **å®Œæ•´åŠŸèƒ½æµ** - ä¸Šä¼ â†’è½¬å†™â†’é¢„è§ˆâ†’ä¸‹è½½å…¨æµç¨‹æ‰“é€š
4. âœ… **è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ** - è¿›åº¦åé¦ˆã€é”™è¯¯æç¤ºã€æµç•…åŠ¨ç”»
5. âœ… **æŠ€æœ¯æ ˆç°ä»£åŒ–** - React 18 + TypeScript + Vite + TailwindCSS
6. âœ… **ä¸“ä¸šé¢†åŸŸä¼˜åŒ–** - æ”¯æŒè‡ªå®šä¹‰ ASR ä¸Šä¸‹æ–‡å’Œè¯­ç§æŒ‡å®š

### ğŸ†• æ–°å¢åŠŸèƒ½ï¼ˆ2025-11-13 æ›´æ–°ï¼‰

**ASR é…ç½®å¢å¼ºï¼š**
- **ä¸“ä¸šæœ¯è¯­æç¤º**ï¼ˆ`asr_context`ï¼‰
  - ç”¨æˆ·å¯è¾“å…¥ä¸“ä¸šé¢†åŸŸæœ¯è¯­æç¤º
  - ç¤ºä¾‹ï¼šåŒ»ç–—ã€é‡‘èã€æŠ€æœ¯ç­‰ä¸“ä¸šè¯æ±‡
  - æå‡ç‰¹å®šé¢†åŸŸçš„è¯†åˆ«å‡†ç¡®ç‡
  
- **è¯­ç§é€‰æ‹©**ï¼ˆ`language`ï¼‰
  - æ”¯æŒæŒ‡å®šéŸ³é¢‘è¯­ç§ï¼šä¸­æ–‡ã€è‹±æ–‡ã€æ—¥è¯­ã€éŸ©è¯­ç­‰
  - å·²çŸ¥è¯­ç§æ—¶å¯æå‡è¯†åˆ«å‡†ç¡®ç‡
  - ä¸æŒ‡å®šåˆ™è‡ªåŠ¨æ£€æµ‹

**å‰ç«¯UIå¢å¼ºï¼š**
- å¯æŠ˜å çš„é«˜çº§è®¾ç½®é¢æ¿
- è¯­ç§ä¸‹æ‹‰é€‰æ‹©å™¨
- å¤šè¡Œæ–‡æœ¬è¾“å…¥æ¡†ï¼ˆä¸“ä¸šæœ¯è¯­ï¼‰
- ä½¿ç”¨ç¤ºä¾‹æç¤º

### ğŸ†• é•¿éŸ³é¢‘ & ä»»åŠ¡ä¸­å¿ƒ UIï¼ˆ2025-11-16 å®Œæˆï¼‰

**é•¿éŸ³é¢‘ URL æäº¤ï¼š**
- `LongAudioForm` ç»„ä»¶ï¼šæ”¯æŒè¿œç¨‹ URL è¾“å…¥ã€æ¨¡å‹é€‰æ‹©ã€è¯­è¨€æç¤º
- å®æ—¶æ˜¾ç¤º DashScope é˜Ÿåˆ—é™åˆ¶å’Œ TTL è§„åˆ™
- æäº¤åæ˜¾ç¤º task_id å’Œæ’é˜ŸçŠ¶æ€æç¤º

**ä»»åŠ¡å†å²ç®¡ç†ï¼š**
- `TaskHistoryPanel` ç»„ä»¶ï¼šç»Ÿä¸€å±•ç¤ºçŸ­/é•¿éŸ³é¢‘ä»»åŠ¡åˆ—è¡¨
- å®æ—¶çŠ¶æ€åˆ·æ–°ã€TTL å€’è®¡æ—¶æ˜¾ç¤º
- æ”¯æŒæŒ‰çŠ¶æ€è¿‡æ»¤ï¼ˆPENDING/RUNNING/SUCCEEDED/FAILEDï¼‰
- ä¸€é”®åˆ·æ–°ã€æŸ¥çœ‹è¯¦æƒ…ã€å–æ¶ˆä»»åŠ¡

**ä»»åŠ¡è¯¦æƒ…å±•ç¤ºï¼š**
- `TaskDetailDrawer` ç»„ä»¶ï¼šä¾§æ»‘æŠ½å±‰å±•ç¤ºä»»åŠ¡è¯¦æƒ…
- Markdown æ‘˜è¦åŒºï¼šæå–å…³é”®ä¿¡æ¯ï¼ˆURLã€è¯­è¨€ã€è¯†åˆ«ç‰‡æ®µï¼‰
- JSON/éŸ³é¢‘æ–‡ä»¶ä¸‹è½½é“¾æ¥
- å®æ—¶åˆ·æ–°å’Œå–æ¶ˆæ“ä½œ

**API é›†æˆï¼š**
- å®Œæ•´é›†æˆ DashScope ä»£ç†æ¥å£
- æ”¯æŒä»»åŠ¡è½®è¯¢å’ŒçŠ¶æ€æŸ¥è¯¢
- é”™è¯¯å¤„ç†å’Œç±»å‹å®‰å…¨

### ğŸ“¦ äº¤ä»˜ç‰©æ¸…å•

**ä»£ç æ–‡ä»¶ï¼š**
- `api/audio_api.py` - éŸ³é¢‘ API è·¯ç”±ï¼ˆå¢å¼ºç‰ˆï¼‰
- `api/audio_models.py` - æ•°æ®æ¨¡å‹
- `pipelines/audio_pipeline.py` - éŸ³é¢‘å¤„ç†ç®¡é“ï¼ˆå« Markdown ç”Ÿæˆï¼‰
- `frontend/` - å®Œæ•´å‰ç«¯é¡¹ç›®
  - `src/components/` - React ç»„ä»¶
  - `src/services/` - API å®¢æˆ·ç«¯
  - `src/store/` - çŠ¶æ€ç®¡ç†
  - `src/types/` - TypeScript ç±»å‹

**æ–‡æ¡£ï¼š**
- `docs/audio_ui_guide.md` - ç”¨æˆ·ä½¿ç”¨æŒ‡å—
- `openspec/changes/add-audio-ui/` - OpenSpec å˜æ›´æ–‡æ¡£

**è„šæœ¬ï¼š**
- `start_ui.bat` - ä¸€é”®å¯åŠ¨è„šæœ¬
- `test_ui_integration.py` - é›†æˆæµ‹è¯•è„šæœ¬

### ğŸš€ ä½¿ç”¨æ–¹å¼

```bash
# ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰
start_ui.bat

# æˆ–æ‰‹åŠ¨å¯åŠ¨
# ç»ˆç«¯ 1 - åç«¯
python -m uvicorn api:app --reload --port 8000

# ç»ˆç«¯ 2 - å‰ç«¯
cd frontend
npm run dev

# è®¿é—®åº”ç”¨
http://localhost:5173
```

### ğŸ’¡ åç»­ä¼˜åŒ–å»ºè®®ï¼ˆå¯é€‰ï¼‰

1. **è‡ªåŠ¨åŒ–æµ‹è¯•**
   - æ·»åŠ  Playwright ç«¯åˆ°ç«¯æµ‹è¯•
   - å•å…ƒæµ‹è¯•è¦†ç›–æ ¸å¿ƒåŠŸèƒ½

2. **æ€§èƒ½ä¼˜åŒ–**
   - å®ç°æ–‡ä»¶æ¸…ç†ç­–ç•¥ï¼ˆå®šæœŸåˆ é™¤æ—§æ–‡ä»¶ï¼‰
   - æ·»åŠ ç¼“å­˜æœºåˆ¶
   - ä¼˜åŒ–å¤§æ–‡ä»¶ä¸Šä¼ ï¼ˆåˆ†ç‰‡ä¸Šä¼ ï¼‰

3. **åŠŸèƒ½å¢å¼º**
   - æ”¯æŒæ‰¹é‡ä¸Šä¼ 
   - å†å²è®°å½•ç®¡ç†
   - ç”¨æˆ·è®¤è¯å’Œæƒé™æ§åˆ¶
   - å¤šè¯­è¨€æ”¯æŒ

4. **ç”Ÿäº§éƒ¨ç½²**
   - Docker å®¹å™¨åŒ–
   - Nginx åå‘ä»£ç†
   - HTTPS é…ç½®
   - æ—¥å¿—å’Œç›‘æ§
